<div data-testid="prompt-output-viewer">
  <h3>Prompt / Output Viewer</h3>
  <p *ngIf="!conversationId">No conversation selected.</p>
  <div *ngIf="conversationId">
    <p><strong>Conversation:</strong> {{ conversationId }}</p>
    <div *ngIf="loading">Loading...</div>
    <div *ngIf="!loading && calls.length > 0">
      <div>
        <h4>Latest Request</h4>
        <pre>{{ redactionEnabled ? 'redacted' : (calls[0].request_data | json) }}</pre>
      </div>
      <div>
        <h4>Latest Response</h4>
        <pre>{{ redactionEnabled ? 'redacted' : (calls[0].response_data | json) }}</pre>
      </div>
      <div>
        <h4>Usage</h4>
        <p>Tokens: {{ calls[0].total_tokens }} | Cost: {{ calls[0].cost }} | Latency: {{ calls[0].response_time_ms }}ms</p>
      </div>
    </div>
  </div>
</div>


