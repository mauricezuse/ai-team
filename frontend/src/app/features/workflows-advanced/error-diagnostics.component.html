<div data-testid="error-diagnostics">
  <h3>Error Diagnostics</h3>
  <div *ngIf="loading">Loading...</div>
  <div *ngIf="!loading">
    <h4>Failed Steps</h4>
    <div *ngIf="failedSteps.length === 0">None</div>
    <ul *ngIf="failedSteps.length > 0">
      <li *ngFor="let s of failedSteps">{{ s.step }} (id {{ s.id }})</li>
    </ul>

    <h4>Escalations</h4>
    <div *ngIf="escalations.length === 0">None</div>
    <ul *ngIf="escalations.length > 0">
      <li *ngFor="let e of escalations">#{{ e.conversationId }}: {{ e.from_agent }} â†’ {{ e.to_agent }} ({{ e.status }}) - {{ e.reason }}</li>
    </ul>

    <h4>Retries (inferred)</h4>
    <div *ngIf="retries.length === 0">None</div>
    <ul *ngIf="retries.length > 0">
      <li *ngFor="let r of retries">{{ r.step }}: {{ r.count }} attempts</li>
    </ul>
  </div>
</div>


